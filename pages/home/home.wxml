<view style='margin-bottom:18rpx;'/>
<view wx:for="{{posts}}" wx:for-item="item" wx:key="{{item.id}}">
  <view class="card">
    
    <!-- Content Area -->
    <view bindtap='topicClick' data-idx="{{index}}">
      <view class="horizontal">
        <image class='avatar-large' style='margin: 10rpx 18rpx 10rpx 0px;'
          src="{{item.author.avatar?item.author.avatar:'/res/img/user_icon.png'}}" 
          />
        <view>
          <view class='title'>{{item.author.nickname?item.author.nickname:'匿名'}}</view>
          <view class='subtitle'>摘要信息</view>
        </view>
        <image class='menu' src="/res/img/menu.png" catchtap='clickMenu' data-idx='{{index}}' />
      </view>
      <view style='margin-bottom:9.36rpx;'/>
      <view style='margin-left:9.36rpx;'>
        <text 
          wx:for="{{item.styled}}" 
          wx:for-item="text" 
          wx:key="{{index}}"
          class="{{text.tag?'highlight':''}}">{{text.text}} </text>
      </view>
    </view>

    <!-- Comment and Favor bar -->
    <view class='line'></view>
    <view class='flow-right'>
      <view class='subtitle' style='margin-right:auto;'>{{item.time}}</view>
      <view class='img-text' bindtap='commentClick' data-idx="{{index}}">
        <image src='/res/img/comment.png'></image>
        <text>{{item.stats.comments}}</text>
      </view>
      <view class='img-text' bindtap='favorClick' data-idx="{{index}}">
        <image src="{{item.stats.favored > 0 ? '/res/img/liked.png' : '/res/img/like.png'}}"></image>
        <text>{{item.stats.favors}}</text>
      </view>
    </view>
  </view>
  <view style='margin-bottom:9.36rpx;'/>
</view>

<view wx:if='{{loader.ing}}' style='text-align:center;'>
  <text>正在加载...</text>
</view>
<view wx:if='{{!loader.more}}' style='text-align:center;'>
  <text>没有更多数据了</text>
</view>

<view>
  <button bindtap='newTopic' class='new-topic'>发帖</button>
</view>